(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{270:function(e,t,a){},355:function(e,t,a){e.exports=a(706)},384:function(e,t,a){},500:function(e,t,a){},699:function(e,t,a){},701:function(e,t,a){},704:function(e,t,a){},706:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),c=a.n(o),l=a(52),s=a(6),i=a(274),u=(a(364),Object(l.c)({loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}})),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";switch((arguments.length>1?arguments[1]:void 0).type){case"SET_TO_LOGIN_MODE":return"login";case"SET_TO_REGISTER_MODE":return"register";case"SET_TO_REGISTER_DETOX_MODE":return"detoxregister";default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BED_COUNT":return t.payload;default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DETOX_INFO":return t.payload;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_All_DETOX_INFO":return t.payload;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DETOX_LAT_LNG":return t.payload;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("in currentLocationReducer",t.payload),t.type){case"SET_CURRENT_LOCATION":return t.payload;default:return e}},v=Object(l.c)({errors:u,loginMode:d,user:m,currentBedCountById:p,detoxInfo:g,allDetoxInfo:E,detoxLatLng:h,currentLocation:b}),f=a(10),O=a.n(f),y=a(7),x=a(43),_=a.n(x),j=O.a.mark(N),w=O.a.mark(S),T=O.a.mark(I);function N(e){var t;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(y.c)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=6,_.a.post("api/user/login",e.payload,t);case 6:return a.next=8,Object(y.c)({type:"FETCH_USER"});case 8:a.next=20;break;case 10:if(a.prev=10,a.t0=a.catch(0),console.log("Error with user login:",a.t0),401!==a.t0.response.status){a.next=18;break}return a.next=16,Object(y.c)({type:"LOGIN_FAILED"});case 16:a.next=20;break;case 18:return a.next=20,Object(y.c)({type:"LOGIN_FAILED_NO_CODE"});case 20:case"end":return a.stop()}},j,this,[[0,10]])}function S(e){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,_.a.post("api/user/logout",t);case 4:return e.next=6,Object(y.c)({type:"UNSET_USER"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with user logout:",e.t0);case 11:case"end":return e.stop()}},w,this,[[0,8]])}function I(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)("LOGIN",N);case 2:return e.next=4,Object(y.d)("LOGOUT",S);case 4:case"end":return e.stop()}},T,this)}var D=I,C=O.a.mark(R),L=O.a.mark(k);function R(e){return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(y.c)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,_.a.post("api/user/register",e.payload);case 5:return t.next=7,Object(y.c)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(y.c)({type:"SET_TO_LOGIN_MODE"});case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),t.next=16,Object(y.c)({type:"REGISTRATION_FAILED"});case 16:case"end":return t.stop()}},C,this,[[0,11]])}function k(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)("REGISTER",R);case 2:case"end":return e.stop()}},L,this)}var G=k,A=O.a.mark(F),M=O.a.mark(U);function F(){var e,t;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=4,_.a.get("api/user",e);case 4:return t=a.sent,a.next=7,Object(y.c)({type:"SET_USER",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("User get request failed",a.t0);case 12:case"end":return a.stop()}},A,this,[[0,9]])}function U(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)("FETCH_USER",F);case 2:case"end":return e.stop()}},M,this)}var B=U,z=O.a.mark(Y),P=O.a.mark(J),W=O.a.mark(V),X=O.a.mark(Z),H=O.a.mark(K),q=O.a.mark(Q);function Y(e){var t,a;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("in increaseSaga",e.payload),t=e.payload,n.prev=2,n.next=5,Object(y.b)(_.a.put,"/detox/increase/".concat(t),{currentBedCount:e.payload});case 5:return a=n.sent,n.next=8,Object(y.c)({type:"SET_BED_COUNT",payload:a.data});case 8:return n.next=10,Object(y.c)({type:"GET_DETOX_INFO_BY_ID",payload:e.payload});case 10:return n.next=12,Object(y.c)({type:"GET_DETOX_INFO"});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),console.log("error with detox increase put request",n.t0);case 17:case"end":return n.stop()}},z,this,[[2,14]])}function J(e){var t,a;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("in decreaseSaga",e.payload),t=e.payload,n.prev=2,n.next=5,Object(y.b)(_.a.put,"/detox/decrease/".concat(t),{currentBedCount:e.payload});case 5:return a=n.sent,n.next=8,Object(y.c)({type:"SET_BED_COUNT",payload:a.data});case 8:return n.next=10,Object(y.c)({type:"GET_DETOX_INFO_BY_ID",payload:e.payload});case 10:return n.next=12,Object(y.c)({type:"GET_DETOX_INFO"});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),console.log("error with decrease put request",n.t0);case 17:case"end":return n.stop()}},P,this,[[2,14]])}function V(e){var t,a;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("in getDetoxInfoSaga",e.payload),t=e.payload,n.prev=2,n.next=5,Object(y.b)(_.a.get,"/detox/detoxinfo/".concat(t),{currentBedCount:e.payload});case 5:return a=n.sent,n.next=8,Object(y.c)({type:"SET_DETOX_INFO",payload:a.data});case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log("error with get request",n.t0);case 13:case"end":return n.stop()}},W,this,[[2,10]])}function Z(e){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in getDetoxInfoSaga"),e.prev=1,e.next=4,Object(y.b)(_.a.get,"/detox/detoxinfo");case 4:return t=e.sent,e.next=7,Object(y.c)({type:"SET_All_DETOX_INFO",payload:t.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error with get request",e.t0);case 12:case"end":return e.stop()}},X,this,[[1,9]])}function K(e){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in getDetoxWithLowestBedCountSaga"),e.prev=1,e.next=4,Object(y.b)(_.a.get,"/detox/mincurrentbeds");case 4:return t=e.sent,e.next=7,Object(y.c)({type:"SET_DETOX_LAT_LNG",payload:t.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error with get request",e.t0);case 12:case"end":return e.stop()}},H,this,[[1,9]])}function Q(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)("INCREASE",Y);case 2:return e.next=4,Object(y.d)("DECREASE",J);case 4:return e.next=6,Object(y.d)("GET_DETOX_INFO_BY_ID",V);case 6:return e.next=8,Object(y.d)("GET_DETOX_INFO",Z);case 8:return e.next=10,Object(y.d)("GET_DETOX_WITH_LOWEST_BED_COUNT",K);case 10:case"end":return e.stop()}},q,this)}var $=Q,ee=O.a.mark(te);function te(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([D(),G(),B(),$()]);case 2:case"end":return e.stop()}},ee,this)}var ae=a(12),ne=a(11),re=a(14),oe=a(13),ce=a(15),le=a(709),se=a(711),ie=a(708),ue=a(710),de=a(275),me=a(48),pe=a(27),ge=a.n(pe),Ee=a(58),he=a.n(Ee),be=a(16),ve=a.n(be),fe=a(707),Oe=(a(384),function(e){return r.a.createElement(fe.a,Object.assign({to:"/detoxnowdefault"},e))}),ye=function(e){return r.a.createElement(fe.a,Object.assign({to:"/about"},e))},xe=function(e){return r.a.createElement(fe.a,Object.assign({to:"/detoxnowmap"},e))},_e=Object(s.b)(function(e){return{user:e.user}})(function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{size:"large",variant:"contained",color:"secondary",component:Oe},"Detox Now")),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{variant:"outlined",component:xe,size:"large",color:"primary"},"Map of Detox Centers")),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{variant:"outlined",component:ye,size:"large",color:"secondary"},"About")))}),je=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",clearance_level:0},a.getDetoxWithMostBedsAvailable=function(e){a.props.dispatch({type:"GET_DETOX_WITH_LOWEST_BED_COUNT"}),a.getGeoLocation()},a.getGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log("in getGeoLoaction","lat: ",e.coords.latitude,"lng:",e.coords.longitude),a.props.dispatch({type:"SET_CURRENT_LOCATION",payload:{lat:e.coords.latitude,lng:e.coords.longitude}}),console.log("found current location","lat:",e.coords.latitude,"lng:",e.coords.longitude)}):(console.log("Location services not supported by your browser"),a.getGeoLocation())},a.login=function(e){e.preventDefault(),a.state.username&&a.state.password?a.props.dispatch({type:"LOGIN",payload:{username:a.state.username,password:a.state.password}}):a.props.dispatch({type:"LOGIN_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(me.a)({},e,t.target.value))}},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.getDetoxWithMostBedsAvailable()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(_e,null)),r.a.createElement("div",null,this.props.errors.loginMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.loginMessage),r.a.createElement("form",{className:"form",onSubmit:this.login},r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"username"}),r.a.createElement(he.a,{id:"username-input",label:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username"),margin:"normal"})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"password"}),r.a.createElement(he.a,{id:"outlined-password-input",label:"Password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password"),type:"password",margin:"normal"})),r.a.createElement("div",null,r.a.createElement("input",{className:"log-in",type:"submit",name:"submit",value:"Log In"}))),r.a.createElement("center",null,r.a.createElement(ve.a,{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_REGISTER_MODE"})}},"Register as a User"),r.a.createElement("br",null),r.a.createElement(ve.a,{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_REGISTER_DETOX_MODE"})}},"Register as a Detox Center"))))}}]),t}(n.Component),we=Object(s.b)(function(e){return{errors:e.errors}})(je),Te=a(41),Ne=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",clearance_level:1},a.registerUser=function(e){e.preventDefault(),a.state.username&&a.state.password?a.props.dispatch({type:"REGISTER",payload:{username:a.state.username,password:a.state.password,clearance_level:a.state.clearance_level}}):a.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(me.a)({},e,t.target.value))}},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.registrationMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.registrationMessage),r.a.createElement("form",{className:"form",onSubmit:this.registerUser},r.a.createElement("h1",null,"Register as a User"),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"username"}),r.a.createElement(Te.b,{id:"username-input",label:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"password"}),r.a.createElement(Te.b,{id:"password-input",label:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")})),r.a.createElement("div",null,r.a.createElement("input",{className:"register",type:"submit",name:"submit",value:"Register"}))),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Login")))}}]),t}(n.Component),Se=Object(s.b)(function(e){return{errors:e.errors}})(Ne),Ie=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",clearance_level:2,detox_center_name:"",address:"",city:"",state:"",zip:0,total_bed_count:0},a.registerUser=function(e){e.preventDefault(),a.state.username&&a.state.password&&a.state.detox_center_name&&a.state.address&&a.state.city&&a.state.state&&a.state.zip&&a.state.total_bed_count?a.props.dispatch({type:"REGISTER",payload:{username:a.state.username,password:a.state.password,clearance_level:a.state.clearance_level,detox_center_name:a.state.detox_center_name,address:a.state.address,city:a.state.city,state:a.state.state,zip:a.state.zip,total_bed_count:a.state.total_bed_count}}):a.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(me.a)({},e,t.target.value))}},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.registrationMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.registrationMessage),r.a.createElement("form",{className:"form",onSubmit:this.registerUser},r.a.createElement("h1",null,"Register as a Detox Center"),r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"username"}),r.a.createElement(Te.b,{id:"username-input",label:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"password"}),r.a.createElement(Te.b,{id:"password-input",label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"detox_center_name"}),r.a.createElement(Te.b,{id:"detox_center_name-input",label:"Detox Center Name",type:"text",name:"detox_center_name",value:this.state.detox_center_name,onChange:this.handleInputChangeFor("detox_center_name")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"address"}),r.a.createElement(Te.b,{id:"address-input",label:"Address",type:"address",name:"address",value:this.state.address,onChange:this.handleInputChangeFor("address")})),r.a.createElement("div",null,r.a.createElement("small",null,"ex. 107 chesnut st NE")),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"city"}),r.a.createElement(Te.b,{id:"city-input",label:"City",type:"city",name:"city",value:this.state.city,onChange:this.handleInputChangeFor("city")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"state"}),r.a.createElement(Te.b,{id:"state-input",label:"State",type:"state",name:"state",value:this.state.state,onChange:this.handleInputChangeFor("state")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"zip"}),r.a.createElement(Te.b,{id:"zip-input",label:"Zip",type:"zip",name:"zip",value:this.state.zip,onChange:this.handleInputChangeFor("zip")})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"total_bed_count"}),r.a.createElement(Te.b,{id:"total_bed_count-input",label:"Total Bed Count",type:"total_bed_count",name:"total_bed_count",value:this.state.total_bed_count,onChange:this.handleInputChangeFor("total_bed_count")})),r.a.createElement("div",null,r.a.createElement("input",{className:"register",type:"submit",name:"submit",value:"Register"}))),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Login")))}}]),t}(n.Component),De=Object(s.b)(function(e){return{errors:e.errors}})(Ie),Ce=Object(s.b)(function(e){return{user:e.user,loginMode:e.loginMode}})(function(e){var t,a=e.component,n=e.component2,o=e.user,c=e.loginMode,l=Object(de.a)(e,["component","component2","user","loginMode"]);return t=o.id&&1===o.clearance_level?a:o.id&&2===o.clearance_level?n:"login"===c?we:"register"===c?Se:"detoxregister"===c?De:we,r.a.createElement(ue.a,Object.assign({},l,{component:t}))}),Le=a(80),Re=(a(500),function(){return r.a.createElement("footer",null)}),ke=a(28),Ge=a(92),Ae=a.n(Ge),Me=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).state={origin:{lat:0,lng:0},directions:""},a.getDetoxWithMostBedsAvailable=function(e){a.props.dispatch({type:"GET_DETOX_WITH_LOWEST_BED_COUNT"})},a.getGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log("in getGeoLoaction","lat: ",e.coords.latitude,"lng:",e.coords.longitude),a.setState(Object(Le.a)({},a.state,{origin:{lat:e.coords.latitude,lng:e.coords.longitude}})),a.displayDirections()}):Ae()("Location services not supported by your browser","warning")},a.displayDirections=function(){console.log("in displayDireactions",a.props.reduxState.currentLocation.lat,a.props.reduxState.currentLocation.lng),console.log("in displayDireactions",a.props.reduxState.detoxLatLng.lat,a.props.reduxState.detoxLatLng.lng);var e=new google.maps.DirectionsService,t=new google.maps.DirectionsRenderer;0===a.state.origin.lat||0===a.state.origin.lng?a.getGeoLocation():e.route({origin:new google.maps.LatLng(a.props.reduxState.currentLocation.lat,a.props.reduxState.currentLocation.lng),destination:new google.maps.LatLng(a.props.reduxState.detoxLatLng.lat,a.props.reduxState.detoxLatLng.lng),travelMode:google.maps.TravelMode.DRIVING},function(e,n){n===google.maps.DirectionsStatus.OK?(t.setDirections(e),console.log(e),a.setState({directions:e}),console.log(e)):(console.error("error fetching directions ".concat(e)),a.getGeoLocation())})},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.getDetoxWithMostBedsAvailable(),this.getGeoLocation()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{align:"center"},r.a.createElement("p",null,"Wait until map displays route"),r.a.createElement("p",null,"Scroll Down for Directions")),r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h2",null,this.props.reduxState.detoxLatLng.detox_center_name),r.a.createElement("input",{defaultValue:this.props.reduxState.detoxLatLng.address}))),r.a.createElement(ke.GoogleMap,{defaultZoom:10,center:{lat:44.975918,lng:-93.273079}},this.state.directions&&r.a.createElement(ke.DirectionsRenderer,{directions:this.state.directions,panel:document.getElementById("panel")}),r.a.createElement("div",{id:"panel"})))}}]),t}(n.Component),Fe=Object(s.b)(function(e){return{reduxState:e}})(Object(ke.withScriptjs)(Object(ke.withGoogleMap)(Me))),Ue="AIzaSyAO0APIwTGpe4qXDwhFRYDxfeRTJ6oPNAk",Be=function(e){function t(){return Object(ae.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Fe,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(Ue,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"450px",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),location:{lat:44.975918,lng:-93.273079}}))}}]),t}(n.Component),ze=Object(s.b)(function(e){return{reduxState:e}})(Be),Pe=function(e){return r.a.createElement(fe.a,Object.assign({to:"/home"},e))},We=function(e){return r.a.createElement(fe.a,Object.assign({to:"/about"},e))},Xe=function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"dextoxnow"},r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{size:"medium",variant:"contained",color:"primary",component:Pe},"Login / Register"))),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{variant:"outlined",component:We,size:"large",color:"secondary"},"About")))},He=function(e){function t(){return Object(ae.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Xe,null),r.a.createElement(ze,null))}}]),t}(n.Component),qe=Object(s.b)(function(e){return{errors:e.errors}})(He),Ye=a(40),Je=a.n(Ye),Ve=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).getAllDetoxInfo=function(e){a.props.dispatch({type:"GET_DETOX_INFO"})},a.state={origin:{lat:0,lng:0},destination:{lat:0,lng:0},directions:"",detox_center_name:"",isOpen:!1,activeMarker:null,detox_id:0},a.displayDirections=function(){console.log("Origin:",a.state.origin.lat,a.state.origin.lng),console.log("Destination",a.state.destination.lat,a.state.destination.lng);var e=new google.maps.DirectionsService,t=new google.maps.DirectionsRenderer;0===a.state.origin.lat||0===a.state.origin.lng?(Ae()("Please try clicking get directions again","warning"),a.getGeoLocation()):e.route({origin:new google.maps.LatLng(a.state.origin.lat,a.state.origin.lng),destination:new google.maps.LatLng(a.state.destination.lat,a.state.destination.lng),travelMode:google.maps.TravelMode.DRIVING},function(e,n){n===google.maps.DirectionsStatus.OK?(t.setDirections(e),console.log(e),a.setState({directions:e}),console.log(e)):(console.error("error fetching directions ".concat(e)),Ae()("Wait, trying again","Directions request failed due to "+n,"warning"),alert("Directions request failed due to "+n))})},a.getGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log("lat: ",e.coords.latitude,"lng:",e.coords.longitude),a.setState(Object(Le.a)({},a.state,{origin:{lat:e.coords.latitude,lng:e.coords.longitude}}))}):alert("Location services not supported by your browser")},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.getGeoLocation(),this.getAllDetoxInfo()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{align:"center"},r.a.createElement("p",null,"Select a marker and click Get Directions"),r.a.createElement("p",null,"Scroll Down for Directions")),r.a.createElement("header",null,r.a.createElement("div",{align:"center"},r.a.createElement("h2",null,this.state.detox_center_name))),r.a.createElement(ke.GoogleMap,{defaultZoom:10,center:{lat:44.975918,lng:-93.273079}},this.state.directions&&r.a.createElement(ke.DirectionsRenderer,{directions:this.state.directions,panel:document.getElementById("panel")}),r.a.createElement("div",{id:"panel"}),r.a.createElement("div",null,this.props.reduxState.allDetoxInfo.map(function(t){return r.a.createElement("div",{key:t.detox_id},r.a.createElement(ke.Marker,{position:{lat:Number(t.lat),lng:Number(t.lng)},onClick:function(){return e.setState({isOpen:!e.state.isOpen,activeMarker:t.detox_id,detox_id:t.detox_id,detox_center_name:t.detox_center_name,destination:{lat:t.lat,lng:t.lng}})}},e.state.activeMarker===t.detox_id&&r.a.createElement(ke.InfoWindow,null,r.a.createElement(Je.a,{className:"infoWindow",key:t.detox_id},r.a.createElement("h3",null,t.detox_center_name),r.a.createElement("input",{defaultValue:t.address}),r.a.createElement("h4",null,"Beds Available:"),r.a.createElement("h3",null,Number(t.total_bed_count)-Number(t.current_bed_count)),r.a.createElement("div",null,r.a.createElement(ve.a,{size:"small",variant:"contained",color:"primary",onClick:function(){return e.displayDirections()}},"Get Directions"))))))}))))}}]),t}(n.Component),Ze=Object(s.b)(function(e){return{reduxState:e}})(Object(ke.withScriptjs)(Object(ke.withGoogleMap)(Ve))),Ke=(a(270),function(e){return r.a.createElement(fe.a,Object.assign({to:"/home"},e))}),Qe=function(e){return r.a.createElement(fe.a,Object.assign({to:"/detoxnowdefault"},e))},$e=function(e){return r.a.createElement(fe.a,Object.assign({to:"/about"},e))},et=function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{size:"large",variant:"contained",color:"secondary",component:Qe},"Detox Now"),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{size:"medium",variant:"contained",color:"primary",component:Ke},"Login / Register"))),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{variant:"outlined",component:$e,size:"large",color:"secondary"},"About")))},tt=function(e){function t(){return Object(ae.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(et,null),r.a.createElement(Ze,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(Ue,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"415px",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),location:{lat:44.975918,lng:-93.273079}}))}}]),t}(n.Component),at=Object(s.b)(function(e){return{reduxState:e}})(tt),nt=function(e){return r.a.createElement(fe.a,Object.assign({to:"/home"},e))},rt=function(e){return r.a.createElement(fe.a,Object.assign({to:"/detoxnowdefault"},e))},ot=function(e){return r.a.createElement(fe.a,Object.assign({to:"/detoxnowmap"},e))},ct=function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{size:"large",variant:"contained",color:"secondary",component:rt},"Detox Now")),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{variant:"outlined",component:ot,size:"large",color:"primary"},"Map of Detox Centers")),r.a.createElement("div",{className:"dextoxnow"},r.a.createElement(ve.a,{size:"medium",variant:"contained",color:"primary",component:nt},"Login / Register")))},lt=Object(s.b)(function(e){return{user:e.user}})(function(e){return r.a.createElement("div",null,r.a.createElement(ct,null),r.a.createElement("h1",null,"Welcome!"),r.a.createElement("div",{align:"center"},r.a.createElement(Je.a,{className:"card4"},r.a.createElement("h2",null,"Problems"),r.a.createElement("ul",null,r.a.createElement("li",null,"Arriving at a detox center where all the beds are taken"),r.a.createElement("li",null,"For those who help get people to a detox center, it is often difficult to find the intoxicated person calling for help."))),r.a.createElement(Je.a,{className:"card4"},r.a.createElement("h2",null,"Provides"),r.a.createElement("ul",null,r.a.createElement("li",null,"Provide directions to people with addiction, and those who help them, to the registered detox center with the most amount of beds available"),r.a.createElement("li",null,"Display how many beds are available and get directions to the regitered detox centers of their chosing."),r.a.createElement("li",null,"Allow registered detox centers to share how many beds they have available"),r.a.createElement("li",null,"Allow anyone who has registered to send their current location to a contact for help getting to a detox center"))),r.a.createElement(Je.a,{className:"card4"},r.a.createElement("h2",null,"Technology Used"),r.a.createElement("ul",null,r.a.createElement("li",null,"React.js"),r.a.createElement("li",null,"Redux.js"),r.a.createElement("li",null,"Node.js"),r.a.createElement("li",null,"Google Maps API - react-google-maps, react-geocode"),r.a.createElement("li",null,"Twilio API- sending SMS"),r.a.createElement("li",null,"Material UI"),r.a.createElement("li",null,"Express"),r.a.createElement("li",null,"CSS"),r.a.createElement("li",null,"Passport")))))}),st=Object(s.b)()(function(e){return r.a.createElement(ve.a,{size:"medium",variant:"contained",color:"primary",className:e.className,onClick:function(){return e.dispatch({type:"LOGOUT"})}},"Log Out")}),it=(a(699),Object(s.b)(function(e){return{user:e.user}})(function(e){return r.a.createElement("div",{className:"nav"},e.user.id&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(st,{className:"nav-right"})),r.a.createElement("div",{className:"center"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center"},"Welcome, ",e.user.username,"!")))))})),ut=a(66),dt=(a(701),a(176)),mt=a.n(dt);mt.a.setApiKey(Ue);var pt=function(e){function t(e){var a;return Object(ae.a)(this,t),(a=Object(re.a)(this,Object(oe.a)(t).call(this,e))).getGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log("lat: ",e.coords.latitude,"lng:",e.coords.longitude),mt.a.fromLatLng(e.coords.latitude,e.coords.longitude).then(function(e){var t=e.results[0].formatted_address;console.log(t),a.setState({message:{body:"From:".concat(a.props.user.username,"\n                                             I need help getting to a detox center, can you come get me here: ").concat(t)}})},function(e){console.error(e)})}):alert("Location services not supported by your browser")},a.state={message:{to:"",body:"Your current location will appear here"},submitting:!1,error:!1},a.onHandleChange=a.onHandleChange.bind(Object(ut.a)(Object(ut.a)(a))),a.onSubmit=a.onSubmit.bind(Object(ut.a)(Object(ut.a)(a))),a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.getGeoLocation()}}]),Object(ne.a)(t,[{key:"onHandleChange",value:function(e){var t=e.target.getAttribute("name");this.setState({message:Object(Le.a)({},this.state.message,Object(me.a)({},t,e.target.value))})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitting:!0}),fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.message)}).then(function(e){return e.json()}).then(function(e){e.success?(t.setState({error:!1,submitting:!1,message:{to:"",body:""}}),alert("Message Sent")):t.setState({error:!0,submitting:!1})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{align:"center"},r.a.createElement(Je.a,{className:"card4"},r.a.createElement("form",{onSubmit:this.onSubmit,className:this.state.error?"error sms-form":"sms-form"},r.a.createElement("div",{className:"sms-form div"},r.a.createElement(ge.a,{className:"sms-form label",htmlFor:"to"},"To:"),r.a.createElement(he.a,{className:"sms-form label",type:"tel",name:"to",id:"to",value:this.state.message.to,onChange:this.onHandleChange})),r.a.createElement("div",null,r.a.createElement(ge.a,{htmlFor:"body"},"Body:"),r.a.createElement(he.a,{disabled:!0,id:"outlined-multiline-static",multiline:!0,rows:"9",value:this.state.message.body,name:"body",onChange:this.onHandleChange})),r.a.createElement(ve.a,{variant:"raised",color:"primary",className:"sms-form button",type:"submit",disabled:this.state.submitting},"Send Message")))))}}]),t}(n.Component),gt=Object(s.b)(function(e){return{user:e.user}})(pt),Et=function(e){function t(){return Object(ae.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"background"},r.a.createElement(it,null),r.a.createElement(gt,null))}}]),t}(n.Component),ht=Object(s.b)(function(e){return{reduxState:e}})(Et),bt=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).getAllDetoxInfo=function(e){a.props.dispatch({type:"GET_DETOX_INFO"})},a.state={isOpen:!1,activeMarker:null},a.markerClick=function(e){console.log("markerClick",a.state),a.setState({isOpen:!a.state.isOpen,activeMarker:e})},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.getAllDetoxInfo()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.reduxState.allDetoxInfo.map(function(t){return r.a.createElement(ke.Marker,{key:t.detox_id,position:{lat:Number(t.lat),lng:Number(t.lng)},onClick:function(){return e.markerClick(t.detox_id)}},e.state.activeMarker===t.detox_id&&r.a.createElement(ke.InfoWindow,null,r.a.createElement(Je.a,{key:t.detox_id},r.a.createElement("h3",null,t.detox_center_name),r.a.createElement("h4",null,"Available Beds:"),r.a.createElement("h3",null,Number(t.total_bed_count)-Number(t.current_bed_count)),r.a.createElement("h4",null,"Occupied Beds:"),r.a.createElement("h3",null,t.current_bed_count))))}))}}]),t}(n.Component),vt=Object(s.b)(function(e){return{reduxState:e}})(bt),ft=function(e){function t(){return Object(ae.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){return r.a.createElement(ke.GoogleMap,{defaultZoom:10,center:{lat:44.975918,lng:-93.273079}},r.a.createElement(vt,null))}}]),t}(n.Component),Ot=Object(s.b)(function(e){return{reduxState:e}})(Object(ke.withScriptjs)(Object(ke.withGoogleMap)(ft))),yt=function(e){function t(){return Object(ae.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(it,null),r.a.createElement(Ot,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(Ue,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"350px",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),location:{lat:44.975918,lng:-93.273079}}))}}]),t}(n.Component),xt=Object(s.b)(function(e){return{reduxState:e}})(yt),_t=a(121),jt=a.n(_t),wt=function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).getDetoxInfo=function(e){a.props.dispatch({type:"GET_DETOX_INFO_BY_ID",payload:a.props.reduxState.user.id})},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.getDetoxInfo()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{align:"center"},r.a.createElement("div",null,r.a.createElement(xt,null)),r.a.createElement(Je.a,{id:"card"},this.props.reduxState.detoxInfo.map(function(e){return r.a.createElement("div",{key:e.detox_id},r.a.createElement("h1",{className:"center2"},e.detox_center_name))}),r.a.createElement(jt.a,null,r.a.createElement("table",{align:"center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Max Bed Count"),r.a.createElement("th",null,"Current Bed Count"))),this.props.reduxState.detoxInfo.map(function(e){return r.a.createElement("tbody",{key:e.id,align:"center"},r.a.createElement("tr",null,r.a.createElement("td",null,e.total_bed_count),r.a.createElement("td",null,e.current_bed_count)))}))),r.a.createElement("div",{className:"detoxCenterBtn"},r.a.createElement(Te.a,null,r.a.createElement(ve.a,{size:"large",variant:"contained",color:"primary",type:"button",onClick:function(){e.props.dispatch({type:"INCREASE",payload:e.props.reduxState.user.id}),e.getDetoxInfo()}},"Increase"),r.a.createElement(ve.a,{size:"large",variant:"contained",color:"primary",type:"button",onClick:function(){e.props.dispatch({type:"DECREASE",payload:e.props.reduxState.user.id}),e.getDetoxInfo()}},"Decrease")))),r.a.createElement(Re,null))}}]),t}(n.Component),Tt=Object(s.b)(function(e){return{reduxState:e}})(wt),Nt=(a(704),function(e){function t(){var e,a;Object(ae.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).getDetoxWithMostBedsAvailable=function(e){a.props.dispatch({type:"GET_DETOX_WITH_LOWEST_BED_COUNT"}),a.getGeoLocation()},a.getGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log("in getGeoLoaction","lat: ",e.coords.latitude,"lng:",e.coords.longitude),a.props.dispatch({type:"SET_CURRENT_LOCATION",payload:{lat:e.coords.latitude,lng:e.coords.longitude}}),console.log("found current location","lat:",e.coords.latitude,"lng:",e.coords.longitude)}):(console.log("Location services not supported by your browser"),a.getGeoLocation())},a}return Object(ce.a)(t,e),Object(ne.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_USER"}),this.getDetoxWithMostBedsAvailable()}},{key:"render",value:function(){return r.a.createElement(le.a,null,r.a.createElement("div",null,r.a.createElement(se.a,null,r.a.createElement(ie.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(ue.a,{exact:!0,path:"/detoxnowdefault",component:qe}),r.a.createElement(ue.a,{exact:!0,path:"/about",component:lt}),r.a.createElement(ue.a,{exact:!0,path:"/detoxnowmap",component:at}),r.a.createElement(Ce,{exact:!0,path:"/home",component:ht,component2:Tt}),r.a.createElement(Ce,{exact:!0,path:"/smsform",component:gt}),r.a.createElement(Ce,{exact:!0,path:"/detoxmap",component:xt}),r.a.createElement(ue.a,{render:function(){return r.a.createElement("h1",null,"404")}}))))}}]),t}(n.Component)),St=Object(s.b)()(Nt),It=Object(i.a)(),Dt=[It],Ct=Object(l.d)(v,l.a.apply(void 0,Dt));It.run(te),c.a.render(r.a.createElement(s.a,{store:Ct},r.a.createElement(St,null)),document.getElementById("react-root"))}},[[355,2,1]]]);
//# sourceMappingURL=main.c2ed9078.chunk.js.map